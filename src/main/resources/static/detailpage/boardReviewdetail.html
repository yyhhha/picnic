<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="/css/main.css">

  <title>Document</title>


</head>

<body>
  <div class="header">
    <header>
      <div style="font-size: small; text-align: right; ">
        <a href="/mypage.html">마이페이지</a>
        <a href="/login.html">로그인</a>
        <a href="/signup.html">회원가입</a>
      </div>
      <a>피그닉 사이트</a>
      <div>
        <form class="example" action="searchall" style="margin:auto;max-width:500px">
          <input type="text" placeholder="Search.." name="search2">
          <button type="submit"><i class="fa fa-search"></i></button>
        </form>
      </div> <br><br>

      <nav>
        <ul class="nav-container">
          <li class="nav-item"> <a href="/listpage/boardRentPage2.html">피크닉 물품대여</a> </li>
          <li class="nav-item"> <a href="/listpage/boardPlacePage2.html">피크닉 장소추천</a> </li>
          <li class="nav-item"> <a href="/listpage/boardReviewPage2.html">피크닉 장소후기</a> </li>
          <li class="nav-item"> <a href="/listpage/boardTipPage2.html">피크닉 꿀팁</a> </li>
        </ul>
      </nav>
    </header>

  </div>

  <div class="row">
    <div class="column side" style="background-color:#ffffff; ">
      <ul>
        <li><a class="active" href="#home">전체보기</a></li>


      </ul>
    </div>


    <div class="column middle" style="background-color:#ffffff;">
      <div id="boardReview">


        <span>제목</span><br>{{reviewTitle}}
        <div>{{placeName}}</div>
        <div>{{reviewScore}}</div>

        <span>상세 내용</span><br>
        <div>{{reviewContent}}</div><br>

        <br>
        <div v-if="checkBoolean">
          <!-- <button style="background-color: rgb(68, 68, 248);">수정</button> -->
          <button v-on:click="removeRent" style="background-color: rgb(68, 68, 248);">삭제</button>
        </div>



      </div>




    </div>


  </div>

  <div class="footer">
    <p>운영자: 권대안, 박서은, 방지원, 유영훈<br>
      게시된 정보는 무단으로 배포할 수 없습니다.</a>
      ＠2021</p>
  </div>

  <script>
    new Vue({
      el: "#boardReview",
      data: {
        reviewTitle: "",
        reviewContent: "",
        reviewScore: "",
        placeName: "",
        checkBoolean: false

      },
      created: function () {
        var params = new URLSearchParams(location.search);

        axios.get('/con/board/reviews/' + params.get('reviewId'))
          .then(response => {
            this.reviewTitle = response.data.reviewTitle;
            this.reviewContent = response.data.reviewContent;
            this.reviewScore = response.data.reviewScore;
            this.placeName = response.data.placeName;
            console.log(response)
          })
          .catch(error => {
            console.log(error)
          });
      },
      mounted: function () {
        var params = new URLSearchParams(location.search);

        axios.get('/con/check/reviewwriter/' + params.get('reviewId'))
          .then(response => {

            if (response.data == sessionStorage.getItem("email")) {
              this.checkBoolean = true;
            }
          })
          .catch(error => {
            console.log(error)
          });
      },
      methods: {
        removeRent() {
          var params = new URLSearchParams(location.search);

          axios.put('/con/del/reviews/' + params.get('reviewId'))
            .then(response => {
              console.log(response)
            })
            .catch(error => {
              console.log(error)
            });
        },
      }

    });
  </script>

</body>

</html>