<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="/css/main.css">


  <title>Document</title>


</head>

<body>
  <div class="header">
    <header>
      <div style="font-size: small; text-align: right; ">
        <a href="/mypage.html">ë§ˆì´í˜ì´ì§€</a>
        <a href="/login.html">ë¡œê·¸ì¸</a>
        <a href="/signup.html">íšŒì›ê°€ì…</a>
      </div>
      <a>í”¼ê·¸ë‹‰ ì‚¬ì´íŠ¸</a>
      <div>
        <form class="example" action="searchall" style="margin:auto;max-width:500px">
          <input type="text" placeholder="Search.." name="search2">
          <button type="submit"><i class="fa fa-search"></i></button>
        </form>
      </div> <br><br>

      <nav>
        <ul class="nav-container">
          <li class="nav-item"> <a href="/listpage/boardRentPage2.html">í”¼í¬ë‹‰ ë¬¼í’ˆëŒ€ì—¬</a> </li>
          <li class="nav-item"> <a href="/listpage/boardPlacePage2.html">í”¼í¬ë‹‰ ì¥ì†Œì¶”ì²œ</a> </li>
          <li class="nav-item"> <a href="/listpage/boardReviewPage2.html">í”¼í¬ë‹‰ ì¥ì†Œí›„ê¸°</a> </li>
          <li class="nav-item"> <a href="/listpage/boardTipPage2.html">í”¼í¬ë‹‰ ê¿€íŒ</a> </li>

        </ul>
      </nav>
    </header>

  </div>

  <div class="row">
    <div class="column side" style="background-color:#ffffff; ">
      <ul>
        <li><a class="active" onclick="goBack()">ë’¤ë¡œ ê°€ê¸°</a></li>


      </ul>
    </div>


    <div class="column middle" style="background-color:#ffffff;">





      <div id="boardTip" class="w3-container w3-white w3-margin w3-padding-large">


        <h2><b>{{tipTitle}}</b></h2>
        <br>
        <div v-if="checkImg">
          <img style="height: 263px; width: 464px;" v-bind:src="tipImg">
        </div>
        <br>
        <div style="font-size: 23px;">{{tipContent}}</div><br>
        <br>

        <span>ìƒì„¸ ë‚´ìš©</span><br>
        <div>{{tipContent}}</div><br>
        <!-- <img style="height: 263px; width: 464px;" v-bind:src="tipImg"> -->
		<br>
		
		<button class="w3-button w3-light-grey" v-on:click="addlike()">ì¢‹ì•„ìš”ğŸ˜</button> <button class="w3-button w3-light-grey" v-on:click="dellike()">ë³„ë¡œì—ìš”ğŸ˜¡</button>
ì´ ì¢‹ì•„ìš”: {{tipLike}}<br>
        <br>
        <div v-if="checkBoolean">
          <!-- <button style="background-color: rgb(68, 68, 248);">ìˆ˜ì •</button> -->
          <button v-on:click="removeTip">ì‚­ì œ</button>
        </div>



      </div>






    </div>


  </div>

  <div class="footer">
    <p>ìš´ì˜ì: ê¶ŒëŒ€ì•ˆ, ë°•ì„œì€, ë°©ì§€ì›, ìœ ì˜í›ˆ<br>
      ê²Œì‹œëœ ì •ë³´ëŠ” ë¬´ë‹¨ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</a>
      ï¼ 2021</p>
  </div>

  <script>
    new Vue({
      el: "#boardTip",
      data: {
        tipTitle: "",
        tipContent: "",
        tipImg: "",

        checkBoolean: false,
        checkImg: false,
        tipLike : 0
 


      },
      created: function () {
        var params = new URLSearchParams(location.search);

        axios.get('/con/board/tips/' + params.get('tipId'))
          .then(response => {
        	this.tipLike = response.data.tipLike;
            this.tipTitle = response.data.tipTitle;
            this.tipContent = response.data.tipContent;
            this.tipImg = response.data.tipImg;
            if (response.data.tipImg != null) {
              this.checkImg = true;
            }
            console.log(response)
          })
          .catch(error => {
            console.log(error)
          });
      },
      mounted: function () {
        var params = new URLSearchParams(location.search);

        axios.get('/con/check/tipwriter/' + params.get('tipId'))
          .then(response => {

            if (response.data == sessionStorage.getItem("email")) {
              this.checkBoolean = true;
            }
          })
          .catch(error => {
            console.log(error)
          });
      },
      methods: {

        removeTip() {
          var params = new URLSearchParams(location.search);

          axios.put('/con/del/tips/' + params.get('tipId'))
            .then(response => {
              console.log(response)
            })
            .catch(error => {
              console.log(error)
            });

          location.href = "http://localhost/listpage/boardTipPage2.html";

        },
        addlike : function(){
         	var params = new URLSearchParams(location.search);
         	axios.put('/con/add/like?tipId=' + params.get('tipId'))
            location.href= "http://localhost/detailpage/boardTipdetail.html?tipId=" + params.get('tipId')
       },
        dellike : function(){
           var params = new URLSearchParams(location.search);
           axios.put('/con/del/like?tipId=' + params.get('tipId'))
           location.href= "http://localhost/detailpage/boardTipdetail.html?tipId=" + params.get('tipId')
         }



        /*removeTip(tipId){
          axios({
                  method: "get",
                  url: "/con/delBoardTip?tipId=" + tipId
          });
      }*/
      }

    });

    function goBack() {
      window.history.back();
    }

  </script>

</body>

</html>